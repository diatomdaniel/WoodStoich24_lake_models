"0",""
"0","## static model"
"0","# apply over scenarios and algal groups"
"0","static.gpp <-  lapply(list(static.algae, static.diatoms, static.greens, static.cyanos), function(x) {"
"0","  params <- x"
"0","  lapply(1:nrow(loads), function(i) {"
"0","    params[""Pin""] = loads[i, ""Pin""]"
"0","    params[""Nin""] = loads[i, ""Nin""]"
"0","    y <- c(""A1"" = 100, ""P"" = loads[i, ""Pin""],""N"" = loads[i, ""Nin""])"
"0","    run <- ode(y, times, parms = params, func = static.stoich)"
"0","    return(run[max(times),])"
"0","  })"
"0","})"
"0","# extract from list and convert to data-frame"
"0","static.gpp.average <- as_data_frame(do.call(rbind, static.gpp[[1]]))"
"0","static.gpp.diatoms <- as_data_frame(do.call(rbind, static.gpp[[2]]))"
"0","static.gpp.greens <- as_data_frame(do.call(rbind, static.gpp[[3]]))"
"0","static.gpp.cyanos <- as_data_frame(do.call(rbind, static.gpp[[4]]))"
"0",""
"0","# bind together"
"0","static.gpp.df <- bind_rows(static.gpp.average, static.gpp.diatoms, static.gpp.greens, static.gpp.cyanos) %>%"
"0","  mutate(model = rep(""static"", nrow(loads) * 4),"
"0","         species = rep(c(""average"", ""diatoms"", ""greens"", ""cyanos""), each = nrow(loads)),"
"0","         Pin = rep(loads$Pin, 4), "
"0","         Nin = rep(loads$Nin, 4))"
"0","static.gpp.df$species <- factor(static.gpp.df$species, levels = c(""average"", ""diatoms"", ""greens"", ""cyanos""))"
"0",""
"0","# # sneak peak of data"
"0","# static.gpp.df %>% ggplot(aes(Pin, Nin, fill = GPP)) + "
"0","#   geom_raster() + facet_wrap(species~.) + "
"0","#   scale_fill_viridis_c()"
"0",""
"0",""
