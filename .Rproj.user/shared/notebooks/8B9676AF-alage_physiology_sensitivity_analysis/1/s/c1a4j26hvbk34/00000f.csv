"0",""
"0","# iterate over parameters"
"0","sim.droop.2 <- lapply(list(""KP1"",""KN1"", ""upP1"", ""upN1"", "
"0","                           ""minQP1"", ""minQN1""), function(f) {"
"0","  params.droop[f] <- params.droop[f] * 0.9"
"0","  # iterate over loads"
"0","  sim.1 <- lapply(1:nrow(loads), function(i) {"
"0","    params.droop[""Pin""] = loads[i, ""Pin""]"
"0","    params.droop[""Nin""] = loads[i, ""Nin""]"
"0","    y <- c(""A1"" = 100, ""P"" = loads[i, ""Pin""], ""N"" = loads[i, ""Nin""],"
"0","           ""QP1"" = 0.015,""QN1"" = 0.1)"
"0","    run <- ode(y, times, parms = params.droop, func = droop.single)"
"0","    return(run[max(times),])"
"0","  })"
"0","  # add meta-data"
"0","  sim.1 <- do.call(rbind, sim.1)"
"0","  sim.1 <- as_data_frame(sim.1)"
"0","  sim.1$Pin <- loads$Pin"
"0","  sim.1$Nin <- loads$Nin"
"0","  # add info on the parameter that was varied"
"0","  sim.1$param <- f"
"0","  return(sim.1)"
"0","})"
"0","sim.droop.2 <- do.call(rbind, sim.droop.2)"
"0","sim.droop.2$scenario <- ""-10%"""
"0",""
