"0",""
"0","static.grid.search <- expand.grid("
"0","  minQP1 =  seq(0.01, 0.2, 0.01),"
"0","  minQN1 = seq(0.01, 0.2, 0.01),"
"0","  umax1 = c(0.4, 0.6, 0.8)"
"0",")"
"0","static.grid.search$KP1 = 16.5"
"0","static.grid.search$KN1 = 50"
"0","# repeat grid nrow(corman2) times"
"0","static.grid.search2 <- static.grid.search %>% "
"0","  slice(rep(1:n(), each = nrow(corman2)))"
"0",""
"0","# add in corman2 data"
"0","static.grid.search2$Lake <- rep(corman2$Lake, nrow(static.grid.search))"
"0","static.grid.search2$GPP <- rep(corman2$GPP, nrow(static.grid.search))"
"0","static.grid.search2$TN_in <- rep(corman2$TN_in, nrow(static.grid.search))"
"0","static.grid.search2$TP_in <- rep(corman2$TP_in, nrow(static.grid.search))"
"0","static.grid.search2$SA <- rep(corman2$SA, nrow(static.grid.search))"
"0","static.grid.search2$DOC_mgL <- rep(corman2$DOC_mgL, nrow(static.grid.search))"
"0","static.grid.search2$z <- rep(corman2$z, nrow(static.grid.search))"
"0",""
"0","#this would take over 10 hrs to run....maybe best to outsource to HCC??? but can do this later"
"0","(start <- Sys.time())"
"1","[1]"
"1"," ""2024-09-02 08:57:17 CDT"""
"1","
"
"0","static.grid.search.out <- lapply(1:nrow(static.grid.search2), function(i){"
"0","  #print(i)"
"0","  # indexing"
"0","  static.algae[""SA""] = static.grid.search2[i, ""SA""]"
"0","  static.algae[""DOC""] = static.grid.search2[i, ""DOC_mgL""]"
"0","  static.algae[""z""] = static.grid.search2[i, ""z""]"
"0","  static.algae[""KP1""] = static.grid.search2[i, ""KP1""]"
"0","  static.algae[""KN1""] = static.grid.search2[i, ""KN1""]"
"0","  static.algae[""QP1""] = static.grid.search2[i, ""minQP1""]"
"0","  static.algae[""QN1""] = static.grid.search2[i, ""minQN1""]"
"0","  static.algae[""umax1""] = static.grid.search2[i, ""umax1""]"
"0","  static.algae[""Pin""] = static.grid.search2[i, ""TP_in""]"
"0","  static.algae[""Nin""] = static.grid.search2[i, ""TN_in""]"
"0","  # starting values"
"0","  y <- c(""A1"" = 100, ""P"" = static.grid.search2[i, ""TP_in""], ""N"" = static.grid.search2[i, ""TN_in""])"
"0","  run <- ode(y, times, parms = static.algae, func = static.stoich.zmix)"
"0","  return(run[max(times),])"
"0","})"
"0","# convert to df"
"0","static.grid.search.out <- do.call(rbind, static.grid.search.out)"
"0","static.grid.search.out <- as_data_frame(static.grid.search.out)"
"0","(end <- Sys.time())"
"1","[1]"
"1"," ""2024-09-02 11:59:58 CDT"""
"1","
"
"0","time.elapsed <- (end - start)"
"0","print(paste0(""Time elapsed = "", time.elapsed, "" hours!""))"
"1","[1]"
"1"," ""Time elapsed = 3.04458756890562 hours!"""
"1","
"
"0","# add to grid"
"0","static.grid.search2$est_GPP <- static.grid.search.out$GPP"
