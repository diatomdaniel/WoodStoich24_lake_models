"0",""
"0","# nutrient loads"
"0","# P = 0.005 to 0.150 g m^-3 = 5 to 150 mg m^-3"
"0","# N = 0.005 to 0.150 g m^-3 = 5 to 150 mg m^-3"
"0","exp1.loads <- expand.grid(Pin = seq(5, 500,20),"
"0","                                Nin = seq(5, 1000, 20))"
"0",""
"0","## michaelis-menten model"
"0","# apply over scenarios"
"0","exp1.mich <- lapply(1:nrow(exp1.loads), function(i) {"
"0","  params.mich[""Pin""] = exp1.loads[i, ""Pin""]"
"0","  params.mich[""Nin""] = exp1.loads[i, ""Nin""]"
"0","  y <- c(""A1"" = 100,"
"0","         ""P"" = exp1.loads[i, ""Pin""],"
"0","         ""N"" = exp1.loads[i, ""Nin""])"
"0","  "
"0","  run <- ode(y, times, parms = params.mich, func = mich.single)"
"0","  return(run[max(times),])"
"0","  "
"0","})"
"0",""
"0","exp1.mich <- do.call(rbind, exp1.mich)"
"0","exp1.mich <- as_data_frame(exp1.mich)"
"0","exp1.mich$Pin <- exp1.loads$Pin"
"0","exp1.mich$Nin <- exp1.loads$Nin"
"0",""
"0","## droop model"
"0","# apply over scearions"
"0","exp1.droop <- lapply(1:nrow(exp1.loads), function(i) {"
"0","  params.droop[""Pin""] = exp1.loads[i, ""Pin""]"
"0","  params.droop[""Nin""] = exp1.loads[i, ""Nin""]"
"0","  y <- c(""A1"" = 100,"
"0","         ""P"" = exp1.loads[i, ""Pin""],"
"0","         ""N"" = exp1.loads[i, ""Nin""],"
"0","         ""QP1"" = 0.015,"
"0","         ""QN1"" = 0.1)"
"0","  "
"0","  run <- ode(y, times, parms = params.droop, func = droop.single)"
"0","  return(run[max(times),])"
"0","  "
"0","})"
"0",""
"0","exp1.droop <- do.call(rbind, exp1.droop)"
"0","exp1.droop <- as_data_frame(exp1.droop)"
"0","exp1.droop$Pin <- exp1.loads$Pin"
"0","exp1.droop$Nin <- exp1.loads$Nin"
"0",""
"0","## combine data sets for plotting"
"0","exp1.data <- bind_rows("
"0","  exp1.mich %>% mutate(model = ""Michaelis-Menten""),"
"0","  exp1.droop %>% mutate(model = ""Droop"")"
"0",") %>%"
"0","  mutate(model = factor(model, levels = c(""Michaelis-Menten"", ""Droop"")))"
"0",""
"0",""
